<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1.1 编程的基本元素 | 《计算机程序的构造与解释》JavaScript版</title>
    <meta name="description" content="暂无">
    
    
    <link rel="preload" href="/sicp-javascript-zh/assets/css/0.styles.929c33a3.css" as="style"><link rel="preload" href="/sicp-javascript-zh/assets/js/app.9215d83a.js" as="script"><link rel="preload" href="/sicp-javascript-zh/assets/js/2.6b5425dd.js" as="script"><link rel="preload" href="/sicp-javascript-zh/assets/js/4.f60551b5.js" as="script"><link rel="prefetch" href="/sicp-javascript-zh/assets/js/10.93a7fb74.js"><link rel="prefetch" href="/sicp-javascript-zh/assets/js/11.860ce0d5.js"><link rel="prefetch" href="/sicp-javascript-zh/assets/js/12.1fd29f9b.js"><link rel="prefetch" href="/sicp-javascript-zh/assets/js/13.23219ac8.js"><link rel="prefetch" href="/sicp-javascript-zh/assets/js/3.bc8de7d9.js"><link rel="prefetch" href="/sicp-javascript-zh/assets/js/5.7a67636c.js"><link rel="prefetch" href="/sicp-javascript-zh/assets/js/6.42169431.js"><link rel="prefetch" href="/sicp-javascript-zh/assets/js/7.6ad2635f.js"><link rel="prefetch" href="/sicp-javascript-zh/assets/js/8.46310511.js"><link rel="prefetch" href="/sicp-javascript-zh/assets/js/9.45d208c9.js">
    <link rel="stylesheet" href="/sicp-javascript-zh/assets/css/0.styles.929c33a3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/sicp-javascript-zh/" class="home-link router-link-active"><!----> <span class="site-name">《计算机程序的构造与解释》JavaScript版</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/iheyunfei/sicp-javascript-zh" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/iheyunfei/sicp-javascript-zh" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/sicp-javascript-zh/" class="sidebar-link">目录</a></li><li><a href="/sicp-javascript-zh/foreword.html" class="sidebar-link">荐言</a></li><li><a href="/sicp-javascript-zh/prefaces.html" class="sidebar-link">前言</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>第一章</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/sicp-javascript-zh/chapter1.html" class="sidebar-link">1 使用函数构造抽象</a></li><li><a href="/sicp-javascript-zh/chapter1.1.html" class="active sidebar-link">1.1 编程的基本元素</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/sicp-javascript-zh/chapter1.1.html#_1-1-1-表达式" class="sidebar-link">1.1.1 表达式</a></li><li class="sidebar-sub-header"><a href="/sicp-javascript-zh/chapter1.1.html#_1-1-2-命名和环境-environment" class="sidebar-link">1.1.2 命名和环境 Environment</a></li><li class="sidebar-sub-header"><a href="/sicp-javascript-zh/chapter1.1.html#_1-1-3-运算复合式的求值" class="sidebar-link">1.1.3 运算复合式的求值</a></li><li class="sidebar-sub-header"><a href="/sicp-javascript-zh/chapter1.1.html#_1-1-4-函数" class="sidebar-link">1.1.4 函数</a></li><li class="sidebar-sub-header"><a href="/sicp-javascript-zh/chapter1.1.html#_1-1-5-函数调用的代换模型" class="sidebar-link">1.1.5 函数调用的代换模型</a></li><li class="sidebar-sub-header"><a href="/sicp-javascript-zh/chapter1.1.html#_1-1-6-conditional-expressions-and-predicates" class="sidebar-link">1.1.6 Conditional Expressions and Predicates</a></li><li class="sidebar-sub-header"><a href="/sicp-javascript-zh/chapter1.1.html#_1-1-6-条件表达式和谓词" class="sidebar-link">1.1.6 条件表达式和谓词</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_1-1-编程的基本元素"><a href="#_1-1-编程的基本元素" aria-hidden="true" class="header-anchor">#</a> 1.1 编程的基本元素</h1> <blockquote><ul><li>来源：<a href="https://sicp.comp.nus.edu.sg/chapters/2" target="_blank" rel="noopener noreferrer">The Elements of Programming<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>译者：<a href="https://github.com/iheyunfei/" target="_blank" rel="noopener noreferrer">塔希<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>协议：<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener noreferrer">CC BY-NC-SA 4.0<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></blockquote> <hr> <p>一种强大的编程语言不仅仅是操控电脑完成一些任务的手段，同样也表现的犹如一种框架，我们在其中组织存在于自身大脑中关于计算过程的想法。因此，当我们描述一门编程语言时，我们应该特别关注语言提供给我们的 <strong>如何组合简单从而形成复杂</strong> 的手段。任何一门强大的语言都提供了三种机制来帮助做到这点：</p> <ul><li><strong>基本表达式</strong>，代表一门编程语言所关心的最简单的元素</li> <li><strong>组合的手段</strong>，通过这些手段，我们可以于简单的元素之上构建复合的元素，以及</li> <li><strong>抽象的手段</strong>——通过这些手段，我们可以对复合元素命名，并且以单元为个体来操控复合元素。</li></ul> <p>编程时，我们与这两种元素打交道——函数和数据（稍后，我们会发现它们之间的的区别并没有那么明显）。通俗的讲，数据是一种需要被我们操控、处理的“东西”，函数则是一系列规则（对于如何操控、处理数据）的描述。因此，任何强力的编程语言都要有能力表述基本的数据和函数，并且，拥有对函数和数据进行组合和抽象的手段。</p> <p>本章中，为了可以专注于构建函数的规则，我们仅仅处理简单的数值型数据<sup id="1-1a1"><a href="#1-1b1">[1]</a></sup>。随后的章节中，我们会认识到这些规则适用于复合型数据。</p> <div id="1-1b1"><p><a href="#1-1a1">[1]</a> The characterization of numbers as simple data is a barefaced bluff. In fact, the treatment of numbers is one of the trickiest and most confusing aspects of any programming language. Some typical issues involved are these: How large a number can we represent? How many decimal places of accuracy can we represent? Above and beyond these questions, of course, lies a collection of issues concerning roundoff and truncation errors—the entire science of numerical analysis. Since our focus in this book is on large-scale program design rather than on numerical techniques, we are going to ignore these problems. The numerical examples in this chapter will exhibit the usual roundoff behavior that one observes when using arithmetic operations that preserve a limited number of decimal places of accuracy in noninteger operations.</p></div> <h2 id="_1-1-1-表达式"><a href="#_1-1-1-表达式" aria-hidden="true" class="header-anchor">#</a> 1.1.1 表达式</h2> <p>当想要使用JavaScript开始编程时，一种简单的方式是通过与内建于浏览器(也就是你正在浏览本页面使用的)的JavaScript解释器进行互动。JavaScript程序仅仅是可以被执行的JavaScript语句。我们已经编写好了一些语句，显示在下方的可以通过鼠标点击深色区域内。通过点击深色区域的JavaScript语句，一个可以对JavaScript语句进行求值的解释器会显示出来，并且可以展示求值后的结果。顺便一提，实现这些功能的程序同样由JavaScript编写；我们称呼这个鼠标点击程序为Script。<sub>(译者注：鉴于兼容性的原因，请通过点击区域下方的 <strong>Click here to run</strong> 来访问对应的JavaScript程序)</sub></p> <p>有一种JavaScript语句类型称为表达式语句，由一个表达式尾随一个分号组成。一个简单的表达式可以是个数字(更精确的说，这个表达式是由一个数学型符号构成，其代表着一个以10为基数的数值。)如果你想要求Script程序显示这个表达式的求值结果</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">486</span><span class="token punctuation">;</span>
</code></pre></div><p><a href="https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm=FAFgHAbA3MxA" target="_blank" rel="noopener noreferrer">Click here to run<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>通过点击 Click here to run，浏览器会创建一个新的标签页，新的标签页中包含着对应的JavaScript语句和对语句进行求值的选项。赶快点击 Click here to run，然后看看会发生什么吧！</p> <p>代表着数字的表达式可以通过运算符(如 + 或 * )组合，形成一个复合表达式，表示把这些数字应用到运算符对应的的基本函数上。</p> <p>例如，通过点击 Click here to run，求值下列的任何表达式语句<sup id="1-1-1a1"><a href="#1-1-1b1">[1]</a></sup>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">137</span> <span class="token operator">+</span> <span class="token number">349</span><span class="token punctuation">;</span>
</code></pre></div><p><a href="https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm=FARgzA7ABA1FYBYCcBuYwg" target="_blank" rel="noopener noreferrer">Click here to run<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">1000</span> <span class="token operator">-</span> <span class="token number">334</span><span class="token punctuation">;</span>
</code></pre></div><p><a href="https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm=FARgDBAEC0kMxwCwG5jCA" target="_blank" rel="noopener noreferrer">Click here to run<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">5</span> <span class="token operator">*</span> <span class="token number">99</span><span class="token punctuation">;</span>
</code></pre></div><p><a href="https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm=FAVgBAVGCc0NzGEA" target="_blank" rel="noopener noreferrer">Click here to run<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">10</span> <span class="token operator">/</span> <span class="token number">5</span><span class="token punctuation">;</span>
</code></pre></div><p><a href="https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm=FARgDABA9BCsDcxhA" target="_blank" rel="noopener noreferrer">Click here to run<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">2.7</span> <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span>
</code></pre></div><p><a href="https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm=FAJgdA7ABA1FCMAGA3MYQ" target="_blank" rel="noopener noreferrer">Click here to run<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>上述将其他表达式作为自身组成部分的表达式被称为<em>复合式 combinations</em>。一个有着 <em>运算符 operator</em> 在中间，<em>运算对象 operand</em> 在两边形状的复合表达式被称为 <em>运算复合式 operator combinations</em>。一个运算复合式的求值结果取决于运算符对应的函数，以及被应用于函数由运算对象所代表的<em>参数 arguments</em>。</p> <p>上述关于将运算符放置于运算对象中间位置的约定被称为 <em>中缀 infix</em> 记法。它与读者在上学时熟悉的常规数学记法一样。和数学一样，运算复合式是可以 <em>嵌套 nested</em> 的，也就是说，运算复合式接受的参数同样也可以是运算复合式。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">-</span> <span class="token number">6</span><span class="token punctuation">)</span>
</code></pre></div><p><a href="https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm=FACgzABAVBCsCUEDUEQEYAMEC0EBs8A3MMEA" target="_blank" rel="noopener noreferrer">Click here to run<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>按照惯例，括号被用来包裹运算复合式来避免歧义。JavaScript同样遵守这个约定，当省略括号时，乘法和除法之间的绑定——即优先级，高于加法和减法。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">3</span> <span class="token operator">*</span> <span class="token number">5</span> <span class="token operator">+</span> <span class="token number">10</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre></div><p><a href="https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm=FAZgBAVGCsYNRgIwAYwHowCYDcxhA" target="_blank" rel="noopener noreferrer">Click here to run<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>等价于</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>
</code></pre></div><p><a href="https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm=FACgzABAVBCsCUEDUEQEYAMED0EBM8A3MMEA" target="_blank" rel="noopener noreferrer">Click here to run<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>我们称这种情况为 * 和 / 有着比 + 和 - 更高的优先级。对于按序出现的加法和减法的序列，其阅读顺序由左到右。对于按序出现的乘法和除法的序列也是一样。因此，</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">3</span> <span class="token operator">/</span> <span class="token number">5</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">-</span> <span class="token number">4</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">;</span>
</code></pre></div><p><a href="https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm=FAZgBA9GCsYFRgExgLRgCxgNRhAbmGCA" target="_blank" rel="noopener noreferrer">Click here to run<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>等价于</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">/</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">;</span>
</code></pre></div><p><a href="https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm=FACjGYAIHpIVgJSQFSQExILSQCxINSTgDcwwQA" target="_blank" rel="noopener noreferrer">Click here to run<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>我们称 +, -, * 和 / 为左结合运算符。</p> <p>原则上，针对JavaScript解释器的求值能力来讲，表达式的嵌套深度是没有限制的。但对于我们人类来说，我们甚至可以被一些相对简单的嵌套表达式搞迷糊，例如</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">3</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">4</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">-</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">27</span> <span class="token operator">/</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a href="https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm=FAZgBAVGBMlgFAFjAageAtGArASl6mAIwAMc80A7GAPRgBsuA3MMEA" target="_blank" rel="noopener noreferrer">Click here to run<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>解释器则能很容易的求值出57。不过，我们可以通过以下这种方式书写表达式，帮助我们</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">3</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">4</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">-</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
<span class="token operator">+</span> 
<span class="token number">10</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">27</span> <span class="token operator">/</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a href="https://sourceacademy.nus.edu.sg/playground#chap=1&amp;prgrm=FAZgBAVGBMlgFAFjAageAtGArASl2MGsAIwAMc80A7GAPRgBsuA3MMEA" target="_blank" rel="noopener noreferrer">Click here to run<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>从视觉上将表达式的主要组成部分分开。</p> <p>解释器在一个基本的循环中进行运算：解释器得到来自浏览器的语句，对语句进行求值，打印求值的结果。这种运算模式通常被表达为，解释器运行在一个 <em>读入-求值-打印 循环 read-eval-print loop</em> 中。要特别注意的是，完全显式的打印任何语句的值是不必要的。</p> <div id="1-1-1b1"><p><a href="#1-1-1a1">[1]</a> 注意分号 <strong>;</strong> 使得JavaScript解释器将此表达式当作一个语句，因此被认为是一个完整的程序。但是，JavaScript本身并没有严格的要求任何时候都要带上分号，有时候可以忽略。但在本书中，我们绝不会把分号当作可选的，并且会指出哪些语句带了分号，哪些没有带。</p></div> <h2 id="_1-1-2-命名和环境-environment"><a href="#_1-1-2-命名和环境-environment" aria-hidden="true" class="header-anchor">#</a> 1.1.2 命名和环境 Environment</h2> <p>对于一门编程语言来说，相当关键的一方面就是语言提供的，使用命名来指代一个计算对象的手段，而我们所接触的第一个这种手段就是<em>常量 constants</em>。我们称这种命名标识了一个常量，其 <em>值 value</em> 是一个对象。<sub>译者注：读者需要注意的是，此对象并非特指JavaScript中的被称为 <em>对象 object</em> 的某种数据类型，而是一种泛指，任何可以被指替的值都可以被称为对象</sub>。</p> <p>在JavaScript中，我们使用 <em>常量声明 constant declarations</em> 语句，键入</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> size <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre></div><p>使得解释器将值 <strong>2</strong> 与命名 <strong>size</strong> 关联起来。常量声明语句的作用就是创造关联，而非计算出一个表达式语句特定的值。JavaScript的语言规范要求对 <em>常量声明</em> 语句进行求值结果为 <em>undefined</em></p> <p>一旦命名 <strong>size</strong> 与 数字 <strong>2</strong> 关联起来，我们可以通过命名 <strong>size</strong> 来指代值 <strong>2</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>size
</code></pre></div><p>or</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">5</span> <span class="token operator">*</span> size<span class="token punctuation">;</span>
</code></pre></div><p>当然，在命名 <strong>size</strong> 可以被用在表达式中之前，JavaScript解释器必须先执行 <strong>size</strong> 的常量声明。对于本书来说，为了简洁性，需要被事先执行的声明语句被刻意忽略了。不过，为了查看求值后的结果，你可以点击 Click here to run。在浏览器新打开的标签页中的程序会包含所有需要的语句。因此，作为点击下方的结果</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">5</span> <span class="token operator">*</span> size<span class="token punctuation">;</span>
</code></pre></div><p>一个包含着所有需要语句的新标签页会被打开，其内容如下所示</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> size <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token number">5</span> <span class="token operator">*</span> size<span class="token punctuation">;</span>
</code></pre></div><p>注意到，JavaScript语句可以按序放置成一个序列。解释器会按序求值序列，然后将这个序列的最后一部分当作这个序列的值。</p> <p>这里有些更进一步的关于 <strong>const</strong> 的使用示例</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> pi <span class="token operator">=</span> <span class="token number">3.14159</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> radius <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>pi <span class="token operator">*</span> radius <span class="token operator">*</span> radius<span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> circumference <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> pi <span class="token operator">*</span> radius<span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>circumference<span class="token punctuation">;</span>
</code></pre></div><p>常量声明是我们语言中最简单的抽象手段，它允许我们能使用简单的命名来指代复合运算结果，例如上方的 circumference。通常，计算对象可能有着非常复杂的结构，当我们想要使用这种计算对象时，如果每次都要记住和重复它们的细节，这会对我们造成的极度的不便。实际上，构建复杂的程序也就是逐步地构建复合的、渐增复杂度的计算对象。我们的解释器使得这种逐步构建程序的方式变得容易，因为通过连续地与程序进行交互，我们可以渐进的构建起命名-对象之间的联系。</p> <p>需要明确的一点——在命名和值之间创建联系，在稍晚的时候使用它们意味着解释器需要某种记忆机制来保持追踪 命名-值 间的配对。这种记忆机制被称为环境(更准确的讲是全局环境，因为我们即将看到一个计算过程可能包含着大量不同的环境)。<sup id="1-1-2a1"><a href="#1-1-2b1">[1]</a></sup></p> <div id="1-1-2b1"><p><a href="#1-1-2a1">[1]</a> 第三章会说明，对于理解解释器如何工作和如何实现解释器，环境的概念是至关重要的。</p></div> <div id="title1-1-3"></div> <h2 id="_1-1-3-运算复合式的求值"><a href="#_1-1-3-运算复合式的求值" aria-hidden="true" class="header-anchor">#</a> 1.1.3 运算复合式的求值</h2> <p>在本章节，我们的目标是将计算的描述(与其他概念)孤立出来。比如说，让我们思考下运算复合式的求值过程。解释器按照下列规则运行：</p> <ul><li>为了求值一个运算复合式，遵循以下步骤：
<ol><li>求值复合式的运算对象表达式</li> <li>调用运算符代表的函数，将其应用于参数——即运算对象所代表的值，</li></ol></li></ul> <p>即使如此简单的求值规则也揭示了关于一般计算的一些要点。首先，注意流程的第一步指明了，为了完成对运算符的求值，我们首先要对运算复合式的每一个运算对象进行求值。至此，求值规则自然而然的带有了递归性；也就是说，求值规则的步骤暗示了调用规则本身的需要。<sub>译者注：即将求值规则应用于一个运算复合式，其第一步是将本规则应用于其子运算复合式，而对于被应用的子运算复合式，同样对其子运算复合式递归的应用本规则。</sub></p> <p>注意，对于多层嵌套的复合式(通常被认为相当复杂的计算过程)，这种递归的思想在表达如何对其求值是相当简洁的。举个例子，对下方语句求值</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">+</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>要求将求值规则应用于四个不同的复合式。将复合式以树的形式表示出来，我们可以得到一张求值过程的图片，见<a href="#figure1-1">图1.1</a>。每个节点代表一个复合式，由其延伸出的枝干分别指向运算复合式的运算符和运算对象。末端节点(就是没有枝干的节点)代表着运算符或者数字。从树的角度来观察求值过程，可以看出运算对象的求值结果，从末端节点开始，向上方“渗出”，逐层的结合起来。通常，对于处理层次化或树形的对象来说，我们会看到递归是一种非常强大的技术。实际上，“向上方渗出值”形式的求值规则通常被称为 <em>树形积累 tree accumulation</em>。</p> <div id="figure1-1" align="center"><p><img src="data:image/png;base64,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" alt="Tree representation, showing the value of each subexpression."></p> <p>图1.1 树形表示, 展示了每个子表达式的值</p></div> <p>接下来，值得注意的是，重复应用求值规则的第一步，总将我们带到需要进行求值的基本表达式，如数字或命名，而非其他的运算复合式。我们作出以下规定来处理这些基本情况</p> <ul><li>数字的值就是数字本身代表的数值，</li> <li>命名的值是，在某种环境下，与此命名相关联的那个对象</li></ul> <p>注意，环境的作用就是决定表达式中各个命名的含义。在JavaScript中，谈论 <strong>x + 1</strong> 的值是多少，却没有提供环境信息指明命名x的含义，毫无意义。我们将会在第三章看到，<em>环境 environment</em> 是一个普遍性的概念，在解释器求值时提供了一个 <em>上下文 context</em>。因此，环境对于理解程序如何执行是至关重要的。</p> <p>注意，上述求值规则并不处理常量声明。举个例子，求值 <strong>const x = 3;</strong> 并没有将 命名x 和 数字3 两个参数应用到运算符 = 上，因为常量声明的目的是在命名x与某个值之间创建一种联系。(也就是说，常量声明 <strong>const x = 3;</strong> 中的 <strong>x = 3</strong> 并不是运算复合式。)</p> <p>在常量声明中的字符串 “<strong>const</strong>” 之所以加粗，是为了指明 const 是JavaScript中的一个 <em>关键字 keyword</em>。不同关键字有着其特殊的含义，因此是保留的，不能被用作命名。一个关键字或多个关键字的组合指示了解释器如何特殊对待这些单独的语句。每种关键字语句都有属于自身的求值规则。各种各样的语句(每一个都关联着自身的求值规则)构成了一门编程语言的语法。</p> <div id="title-1-1-4"><h2 id="_1-1-4-函数"><a href="#_1-1-4-函数" aria-hidden="true" class="header-anchor">#</a> 1.1.4 函数</h2> <p>我们已经在JavaScript语言中见过了在任何强大编程语言中都会出现的元素：</p> <ul><li>作为基础数据和函数的数字和和算术运算符。</li> <li>可以嵌套的复合式提供组合各种操作的手段。</li> <li>可以在命名和值之间创建联系的常量声明，提供了一种受限的抽象手段</li></ul> <p>现在我们将要学习 <em>函数声明 function declarations</em>，一种更加强大的抽象技术，使得复合操作可以被命名和以单元的形式引用。</p> <p>我们的学习开始于，研究如何表达“平方 squaring”的想法。我们也许会说，“要求平方某物，即要求它乘以自身”。在我们的编程语言中，平方的表达如下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">square</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们可以按照以下的方式理解这一表述</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">square</span><span class="token punctuation">(</span>    <span class="token parameter">x</span>   <span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> x    <span class="token operator">*</span>     x<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token comment">//  ^       ^       ^         ^    ^    ^     ^</span>
<span class="token comment">// To    square something,  take   it times itself.</span>
<span class="token comment">// 为了  平方   某物         要求   它  乘以  自身</span>
</code></pre></div><p>这里，我们有了一个名叫 <strong>square</strong> 的 <em>复合函数 compound function</em>。这个函数代表着将一个事物乘以自身的操作。被乘的事物被给予了一个本地命名 <strong>x</strong>，其作用就和自然语言中的代词相同。对函数声明语句求值会创建一个复合函数，然后将其与命名 <strong>square</strong> 联系在一起。<sup id="1-1-4a1"><a href="#1-1-4b1">[1]</a><sup></sup></sup></p> <p>我们最简单的一个函数声明格式如下</p> <blockquote><p>function <em>name</em> ( <em>parameters</em> ) { return <em>expression</em>; }</p></blockquote> <blockquote><p>function <em>函数名</em> ( <em>参数</em> ) { return <em>表达式</em>; }</p></blockquote> <p><em>函数名 name</em> 是一个将会与函数联系在一起的符号，存储在环境中。<sup id="1-1-4a2"><a href="#1-1-4b1">[2]</a></sup> <em>参数 parameters</em> 是存在于函数内部的命名，指向函数对应位置的参数。在关键字 <strong>return</strong> 后的 <em>expression</em> 是 <em>返回表达式 return expression</em>，当函数被调用时，其形式参数被给予的实际参数替换，返回表达式会产生相应的值。<sup id="1-1-4a3"><a href="#1-1-4b1">[3]</a></sup>参数组织在括号内，由逗号隔开，就和它们在声明后的函数被调用时一样。</p> <p>在声明了 square 函数后，现在，我们可以在 <em>函数调用表达式 function application expression</em> 中使用这个函数。通过分号，我们可以将函数调用表达式转换成一个语句：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">square</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>命名 <strong>square</strong> 是调用过程中的函数表达式，<strong>21</strong> 是参数表达式。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">square</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>现在，参数变成了一个复合表达式，即表达式 <strong>2 + 5</strong>。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">square</span><span class="token punctuation">(</span><span class="token function">square</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>当然，函数调用表达式也可以被当作参数。</p> <p>同样的，我们可以将 square 当作基本构件去声明其他函数。举个例子，x<sup>2</sup>+y<sup>2</sup> 可以被表达为</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">square</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">square</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>很简单地，我们可以声明一个 sum_of_squares 函数，在给定两个数字参数后，返回它们的平方和</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">sum_of_squares</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span>y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">square</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">square</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>现在，我们可以将 sum_of_squares 当作基本构件去构造更高层次的函数：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">sum_of_squares</span><span class="token punctuation">(</span>a <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> a <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>函数调用如 <strong>sum_of_squares(3,4)</strong>，是继运算复合式后，我们遇到的第二种关于表达式嵌套表达式的复合式。除了复合函数之外，JavaScript还提供了许多内置于解释器中的基本函数。比如函数 <strong>math_log</strong>，它计算给定参数的自然对数。<sup id="1-1-4a4"><a href="#1-1-4b1">[4]</a></sup>求值函数调用 <strong>math_log(1)</strong> 会得到结果0。确实，人并不能通过查看 <strong>sum_of_squares</strong> 函数的定义，判断出 <strong>square</strong> 函数是像 <strong>math_log</strong> 函数一样内建于解释器，还是说被定义为复合函数。</p> <small id="1-1-4b1"><p><a href="#1-1-4a1">[1]</a> 注意，这里有两种不同操作被绑定在一起了：创建函数，给这个函数命名。将这两个概念分开是很重要的——不给予名字的情况下创建函数和，对已创建的函数命名。我们会在<a href=""><em>这里应连接到</em>1.3.2</a>节看到怎么做。</p> <p><a href="#1-1-4a2">[2]</a> 贯穿本书，我们在描述程序的语法时，会使用斜体符号(比如 <em>name</em>)作为表达式中的占位符，每一个都代表着表达式在被实际使用时需要被填充的位置。</p> <p><a href="#1-1-4a3">[3]</a> 在下一节中，我们将看到函数体可以是一系列语句。在这种情况下，解释器依次求值序列中的每个语句，直到 return语句 确定函数调用的值。</p> <p><a href="#1-1-4a4">[4]</a> 本书使用的 Source 编程语言引入了命名 math_* 来指代JavaScript中Math对象里所有的函数和常量。</p></small> <h2 id="_1-1-5-函数调用的代换模型"><a href="#_1-1-5-函数调用的代换模型" aria-hidden="true" class="header-anchor">#</a> 1.1.5 函数调用的代换模型</h2> <p>为了求值一个调用复合式 application combination，解释器遵循着与求值运算复合式相似的过程，描述于章节<a href="#title1-1-3">1.1.3</a>。也就说解释器求值复合式中的每一个元素，然后将参数(即调用复合式参数表达式的求值结果)应用到函数(即函数表达式的求值结果)上。</p> <p>更详细地讲，在求值调用复合式时，解释器按照以下规则运行：</p> <ul><li>为了求值下方这种形式的调用复合式</li> <li><blockquote><p><em>function-expression</em> ( <em>argument-expressions</em> )</p></blockquote></li> <li>执行以下步骤:
<ol><li>求值调用复合式中的 <em>函数表达式 function-expression</em>，得到将被调用的函数</li> <li>求值调用复合式的 <em>参数表达式 argument-expressions</em></li> <li>将函数应用于参数:
<ul><li>如果是基本函数，我们只需简单地将相应的数学函数应用于参数。</li> <li>如果是复合函数，在形式参数被实际参数替换后，我们求值 return 处的表达式。</li></ul></li></ol></li></ul> <p>为了说明这个过程，我们来求值这个调用复合式</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">f</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>求值命名 f，得到一个函数(于<a href="#title-1-1-4">1.1.4</a>节声明)。求值参数表达式 5，产生对应的参数值 5。现在，我们获取到函数 f 在 return 处的表达式</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">sum_of_squares</span><span class="token punctuation">(</span>a <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> a <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>
</code></pre></div><p>在此，我们将形式参数 a 替换成实际参数 5</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">sum_of_squares</span><span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>
</code></pre></div><p>因此，问题被简化成对带有两个参数和函数表达式 <strong>sum_of_squares</strong> 的调用复合式求值的问题。对这个复合式的求值包含了三个子问题。我们必须求值函数表达式来得到将被调用的函数，我们同样必须求值参数表达式来得到实际参数。现在 <strong>5 + 1</strong> 产生值 <strong>6</strong>，<strong>5 * 2</strong> 产生值 <strong>10</strong>，所以我们必须将 <strong>6</strong> 和 <strong>10</strong> 应用于函数 <strong>sum_of_squares</strong>。这些值会替换 <strong>sum_of_squares</strong> return 处表达式的形式参数 <strong>x</strong> 和 <strong>y</strong>，表达式被简化成</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">square</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">square</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
</code></pre></div><p>如果我们将 square 函数的声明展开一次，再次被简化为</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token number">6</span> <span class="token operator">*</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">square</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
</code></pre></div><p>在进行过乘法后，简化为</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">36</span> <span class="token operator">+</span> <span class="token function">square</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
</code></pre></div><p>第二次 square 函数调用后，产生出</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">36</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">10</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span>
</code></pre></div><p>再次进行过乘法后，简化为</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">36</span> <span class="token operator">+</span> <span class="token number">100</span>
</code></pre></div><p>最终进行加法，得到</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">136</span>
</code></pre></div><p>我们刚刚描述过程被称为函数调用的代换模型。就本章的函数而言，这个代换过程作为确定函数“意义”的模型足够了。但是，有两点值得强调：</p> <ul><li><p>代换模型的目的是帮助我们思考函数调用，而非提供一个，在实际上，解释器如何工作的描述。典型的解释器并不会通过修改函数定义时的文本来替换形式参数的值。实际上，对形式参数的代换是通过使用本地环境完成的。当我们在第三章和第四章，详细研究解释器的实现时，我们会讨论与之相关的完整内容。</p></li> <li><p>随着本书进度不断增加，我们将提供一系列越来越精细的解释器如何工作的模型，最后在第5章中实现完整的解释器和编译器。代换模型只是这些模型中的第一个——一个开始正式思考求值过程的途径。一般而言，在对科学和工程中的现象进行建模时，我们从简化的，不完整的模型开始。当我们详细研究事物时，这些简单的模型变得不充分，必须用更精细的模型来代替。代换模型也不例外。特别是，当我们在第三章讨论使用带有可变数据的函数时，我们将看到代换模型崩溃，必须替换为更复杂的函数调用模型。<sup id="1-1-5a1"><a href="#1-1-5b1">[1]</a></sup></p></li></ul> <h3 id="应用序与正则序"><a href="#应用序与正则序" aria-hidden="true" class="header-anchor">#</a> 应用序与正则序</h3> <p>根据以上对求值过程的描述，解释器首先求值函数表达式和参数表达式，然后将求值函数表达式后的结果应用于求值参数表达式后的结果。但是，这并不是唯一的求值方法。另一种求值模型只在运算对象的值被实际需要的时候再进行求值。这种求值模型首先将参数处的表达式替换掉，直到获得一个仅包含基本运算符的表达式，然后再开始执行求值过程。如果我们使用这种方法，那么以下表达式的求值</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">f</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
</code></pre></div><p>将会按照以下序列进行</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">sum_of_squares</span><span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>

<span class="token function">square</span><span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>  <span class="token operator">+</span>  <span class="token function">square</span><span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">square</span><span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>
</code></pre></div><p>紧接着进行规约</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">6</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token number">6</span> <span class="token operator">*</span> <span class="token number">6</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token number">36</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token number">36</span> <span class="token operator">+</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token number">36</span> <span class="token operator">+</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token number">10</span>
<span class="token number">36</span> <span class="token operator">+</span> <span class="token number">100</span>
<span class="token number">136</span>
</code></pre></div><p>最后的求值结果与先前的求值模型相同，但是其中的处理过程是不同的。特别地，表达式 <strong>5 + 1</strong> 和 <strong>5 * 2</strong> 都被求值了两次，对应于以下表达式的归约</p> <div class="language-js extra-class"><pre class="language-js"><code>x <span class="token operator">*</span> x
</code></pre></div><p>其中 <strong>x</strong> 被 <strong>5 + 1</strong> 和 <strong>5 * 2</strong> 替换掉。</p> <p>这种“完全展开然后归约”的求值方法被称为 <em>正则序求值 normal-order evaluation</em>，与解释器实际使用的“先求值参数后应用”的 <em>应用序求值 applicative-order evaluation</em> 相比。可以看出，对于可以通过替换模拟且能产生出合法值的函数调用(包括本书前两章的所有函数)，正则序和应用序的求值结果是相同的。(参见练习1.5，一个关于“非法值”的例子，正则序和应用序不会产生相同的结果。)</p> <p>JavaScript使用应用序求值，一部分是因为由于避免了刚才讲的重复求值，因此带来的额外的效率，更重要的是，当我们遇到无法使用替换模型模拟的函数时，正则序求值处理起来会变得非常复杂。</p> <p>不过，在另一方面，正则序求值也可以成为一个极度有价值的工具，我们将会在第三章和第四章研究它的蕴意。<sup id="1-1-5a2"><a href="#1-1-5b1">[2]</a></sup></p> <div id="1-1-5b1"><p><a href="#1-1-5a1">[1]</a> Despite the simplicity of the substitution idea, it turns out to be surprisingly complicated to give a rigorous mathematical definition of the substitution process. The problem arises from the possibility of confusion between the names used for the parameters of a function and the (possibly identical) names used in the expressions to which the function may be applied. Indeed, there is a long history of erroneous definitions of substitution in the literature of logic and programming semantics. See Stoy 1977 for a careful discussion of substitution.</p> <p><a href="#1-1-5a2">[2]</a> 在第三章，我们将会介绍 <em>流处理 stream processing</em>，一种通过混入一种受限的正则序求值形式，来处理明显“无穷尽”数据结构的方法。</p></div> <h2 id="_1-1-6-conditional-expressions-and-predicates"><a href="#_1-1-6-conditional-expressions-and-predicates" aria-hidden="true" class="header-anchor">#</a> 1.1.6 Conditional Expressions and Predicates</h2> <h2 id="_1-1-6-条件表达式和谓词"><a href="#_1-1-6-条件表达式和谓词" aria-hidden="true" class="header-anchor">#</a> 1.1.6 条件表达式和谓词</h2> <p>The expressive power of the class of functions that we can declare at this point is very limited, because we have no way to make tests and to perform different operations depending on the result of a test. For instance, we cannot declare a function that computes the absolute value of a number by testing whether the number is negative or not, and taking different actions in each case according to the rule</p> <div align="center"><p><img src="data:image/png;base64,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" alt="ABS function"></p></div> <p>This construct is a case analysis and can be expressed in JavaScript using a <em>conditional expression</em> as follows:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">abs</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">?</span> x <span class="token punctuation">:</span> <span class="token operator">-</span>x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The general form of a conditional expression is</p> <blockquote><p><em>predicate</em> ? <em>consequent-expression</em> : <em>alternative-expression</em></p></blockquote> <p>Conditional expressions begin with a <em>predicate</em>—that is, an expression whose value is interpreted as either <em>true</em> or <em>false</em>, two distinguished boolean values in JavaScript.<sup id="1-1-6a1"><a href="#1-1-6b1">[1]</a></sup> Note that the primitive boolean expressions true and false trivially evaluate to the boolean values <em>true</em> and <em>false</em>, respectively. The <em>predicate</em> is followed by a question mark, the <em>consequent-expression</em>, a colon, and finally the <em>alternative-expression</em>.</p> <p>To evaluate a conditional expression, the interpreter starts by evaluating the <em>predicate</em> part of the expression. If the predicate evaluates to true, the interpreter evaluates <em>consequent-expression</em>. Otherwise it evaluates <em>alternative-expression</em>.</p> <p>The word predicate is used for functions that return true or false, as well as for expressions that evaluate to <em>true</em> or <em>false</em>. The absolute-value function abs makes use of the primitive predicate &gt;=. This predicate takes two numbers as arguments and tests whether the first number is greater than or equal to the second number, returning <em>true</em> or <em>false</em> accordingly.</p> <p>JavaScript provides a number of primitive predicates that work similar to &gt;=, including &gt;, &lt;, &lt;=, and ===. In addition to these primitive predicates, there are logical composition operations, which enable us to construct compound predicates. The three most frequently used are these:</p> <ul><li><strong>expression<sub>1</sub></strong> &amp;&amp; <strong>expression<sub>2</sub></strong> The interpreter evaluates <strong>expression<sub>1</sub></strong>. If it evaluates to false, the value of the whole expression is false, and <strong>expression<sub>2</sub></strong> is not evaluated. If <strong>expression<sub>1</sub></strong> evaluates to true, the value of the whole expression is the value of <strong>expression<sub>2</sub></strong>.</li> <li><strong>expression<sub>1</sub></strong> || <strong>expression<sub>2</sub></strong> The interpreter evaluates <strong>expression<sub>1</sub></strong>. If it evaluates to true, the value of the whole expresssion is true, and <strong>expression<sub>2</sub></strong> is not evaluated. If <strong>expression<sub>1</sub></strong> evaluates to false, the value of the whole expression is the value of <strong>expression<sub>2</sub></strong>.</li> <li><strong>! expression</strong> The value of the <em>expression</em> is <em>true</em> when expression evaluates to <em>false</em>, and <em>false</em> otherwise.</li></ul> <p>Notice that &amp;&amp; and || are not evaluated like arithmetic operators such as +, because their right-hand expression is not always evaluated. The operator !, on the other hand, follows the evaluation rule of section 1.1.3. It is a unary operator, which means that it takes only one argument, whereas the arithmetic operators encountered so far are binary, taking two arguments. The operator ! precedes its argument; we call it a prefix operator. Another prefix operator is the unary &quot;minus&quot; operator, an example of which is the expression -x of the function abs in the beginning of this section.</p> <p>As an example of how these predicates are used, the condition that a number x be in the range 5&lt;x&lt;10 may be expressed as</p> <div class="language-js extra-class"><pre class="language-js"><code>x <span class="token operator">&gt;</span> <span class="token number">5</span> <span class="token operator">&amp;&amp;</span> x <span class="token operator">&lt;</span> <span class="token number">10</span>
</code></pre></div><p>Note that the binary operator &amp;&amp; has lower precedence than the comparison operators &gt; and &lt;.</p> <p>As another example, we can declare a predicate to test whether one number is not equal to another number.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">not_equal</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">&gt;</span> y <span class="token operator">||</span> x <span class="token operator">&lt;</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>or alternatively as</p> <div class="language- extra-class"><pre class="language-text"><code>function not_equal(x, y) {
    return !(x &gt;= y &amp;&amp; x &lt;= y);
}
</code></pre></div><p>Note that the operator !== when applied to two numbers, behaves the same as not_equal.</p> <h3 id="exercise"><a href="#exercise" aria-hidden="true" class="header-anchor">#</a> Exercise</h3> <h4 id="exercise1-1"><a href="#exercise1-1" aria-hidden="true" class="header-anchor">#</a> Exercise1.1</h4> <p>Below is a sequence of statements. Before you click on a statement, predict what the result of its evaluation will be.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">10</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token number">5</span> <span class="token operator">+</span> <span class="token number">3</span> <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token number">9</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token number">6</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token number">2</span> <span class="token operator">*</span> <span class="token number">4</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">4</span> <span class="token operator">-</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> b <span class="token operator">=</span> a <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>a <span class="token operator">+</span> b <span class="token operator">+</span> a <span class="token operator">*</span> b<span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>a <span class="token operator">===</span> b<span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>b <span class="token operator">&gt;</span> a <span class="token operator">&amp;&amp;</span> b <span class="token operator">&lt;</span> a <span class="token operator">*</span> b 
   <span class="token operator">?</span> b <span class="token punctuation">:</span> a<span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>a <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">?</span> <span class="token number">6</span> <span class="token punctuation">:</span> b <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">?</span> <span class="token number">6</span> <span class="token operator">+</span> <span class="token number">7</span> <span class="token operator">+</span> a <span class="token punctuation">:</span> <span class="token number">25</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token number">2</span> <span class="token operator">+</span> <span class="token punctuation">(</span>b <span class="token operator">&gt;</span> a <span class="token operator">?</span> b <span class="token punctuation">:</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span>a <span class="token operator">&gt;</span> b
 <span class="token operator">?</span> a
 <span class="token punctuation">:</span> a <span class="token operator">&lt;</span> b
   <span class="token operator">?</span> b
   <span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token operator">*</span>
<span class="token punctuation">(</span>a <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Note that the statement</p> <div class="language-js extra-class"><pre class="language-js"><code>a <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">?</span> <span class="token number">6</span> <span class="token punctuation">:</span> b <span class="token operator">===</span> <span class="token number">4</span> <span class="token operator">?</span> <span class="token number">6</span> <span class="token operator">+</span> <span class="token number">7</span> <span class="token operator">+</span> a <span class="token punctuation">:</span> <span class="token number">25</span><span class="token punctuation">;</span>
</code></pre></div><p>consists of two conditional expressions, where the second one forms the alternative of the first one. If you want to make that clear, you can indent the lines like this:</p> <div class="language-js extra-class"><pre class="language-js"><code>a <span class="token operator">===</span> <span class="token number">4</span>
<span class="token operator">?</span> <span class="token number">6</span>
<span class="token punctuation">:</span> b <span class="token operator">===</span> <span class="token number">4</span> 
  <span class="token operator">?</span> <span class="token number">6</span> <span class="token operator">+</span> <span class="token number">7</span> <span class="token operator">+</span> a
  <span class="token punctuation">:</span> <span class="token number">25</span><span class="token punctuation">;</span>
</code></pre></div><details><summary>
点击查看答案
</summary> <p>无</p></details> <h4 id="exercise1-2"><a href="#exercise1-2" aria-hidden="true" class="header-anchor">#</a> Exercise1.2</h4> <p>Translate the following expression into JavaScript</p> <div class="language- extra-class"><pre class="language-text"><code>5+4+(2−(3−(6+4/5)))
————————————————————
    3(6−2)(2−7)
</code></pre></div><details><summary>
点击查看答案
</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">+</span> <span class="token number">4</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">-</span> <span class="token punctuation">(</span><span class="token number">6</span> <span class="token operator">+</span> <span class="token number">4</span> <span class="token operator">/</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 
<span class="token operator">/</span>
<span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">6</span> <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">-</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></details> <h4 id="exercise1-3"><a href="#exercise1-3" aria-hidden="true" class="header-anchor">#</a> Exercise1.3</h4> <p>Declare a function that takes three numbers as arguments and returns the sum of the squares of the two larger numbers.</p> <details><summary>
点击查看答案
</summary> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token function">square</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">square</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">square</span><span class="token punctuation">(</span>z<span class="token punctuation">)</span> <span class="token operator">-</span>
          <span class="token comment">// subtract the square of the smallest</span>
          <span class="token function">square</span><span class="token punctuation">(</span>x <span class="token operator">&gt;</span> y <span class="token operator">?</span> <span class="token punctuation">(</span>y <span class="token operator">&gt;</span> z <span class="token operator">?</span> z <span class="token punctuation">:</span> y<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token punctuation">(</span>x <span class="token operator">&gt;</span> z <span class="token operator">?</span> z <span class="token punctuation">:</span> x<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></details> <h4 id="exercise1-4"><a href="#exercise1-4" aria-hidden="true" class="header-anchor">#</a> Exercise1.4</h4> <p>Observe that our model of evaluation allows for application combinations whose function expressions are compound expressions. Use this observation to describe the behavior of the following function:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">plus</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">minus</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> a <span class="token operator">-</span> b<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">a_plus_abs_b</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>b <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">?</span> plus <span class="token punctuation">:</span> minus<span class="token punctuation">)</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Note that in the conditional expression, we cannot directly use the operators + and - instead of the names plus and minus because in infix notation, only operator symbols are allowed in the middle, not compound expressions.<sup id="1-1-6a2"><a href="#1-1-6b1">[2]</a></sup></p> <details><summary>
点击查看答案
</summary> <p>According to section 1.1.5, evaluation of a application expression proceeds as follows:</p> <ul><li>Evaluate the function expression of the application combination, resulting in the function to be applied.</li> <li>Evaluate the argument expressions of the combination.</li> <li>Evaluate the return expression of the function with each parameter replaced by the corresponding argument.</li></ul> <p>Thus the evaluation of the application expression a_plus_abs_b(5, -4) (1) evaluates a_plus_abs_b, resulting in the function given above, and (2) the arguments are already values. So we need to evaluate (3) the return expression of the function, with the parameters replaced by the arguments, thus: (-4 &gt;= 0 ? plus : minus)(5, -4). With the same rules, we need to (1) evaluate the function expression, which in this case is the conditional expression -4 &gt;= 0 ? plus : minus. Since the predicate evaluates to false, the function expression evaluates to minus. The arguments, again (2) are already values. Thus we end up evaluating (3) the body of minus with the parameters a and b replaced by 5 and -4, respectively, resulting in 5 - (-4), which will finally evaluate to 9.</p></details> <h4 id="exercise1-5"><a href="#exercise1-5" aria-hidden="true" class="header-anchor">#</a> Exercise1.5</h4> <p>Ben Bitdiddle has invented a test to determine whether the interpreter he is faced with is using applicative-order evaluation or normal-order evaluation. He declares the following two functions :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">p</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">p</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token punctuation">:</span> y<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Then he evaluates the statement</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token function">p</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>What behavior will Ben observe with an interpreter that uses applicative-order evaluation? What behavior will he observe with an interpreter that uses normal-order evaluation? Explain your answer. (Assume that the evaluation rule for conditional expressions is the same whether the interpreter is using normal or applicative order: The predicate expression is evaluated first, and the result determines whether to evaluate the consequent or the alternative expression.)</p> <details><summary>
点击查看答案
</summary> <blockquote><p>In applicative-order evaluation of test(0, p()), we need to evaluate the argument expressions before we can evaluate the return expression of the function test. The evaluation of the argument expression p() will not terminate, however: It will keep evaluating application expressions of the form p(), and thus the evalution of test(0, p()) will not produce a legitimate value. In normal-order evaluation, on the other hand, the function application test(0, p()) would immediately evaluate the return expression of the function test, x === 0 ? 0 : y after replacing the parameter x with 0 and y with p(). The result of the replacing would be 0 === 0 ? 0 : p(). The evaluation of the predicate 0 === 0 results in true and thus the conditional expression evaluates to 0, without any need to evaluate p().</p></blockquote></details> <div id="1-1-6b1"><p><a href="#1-1-6a1">[1]</a> In JavaScript, other values are automcatically converted into true and false according to conversion rules, but we choose not to make use of these conversion rules in this book.</p> <p><a href="#1-1-6a2">[2]</a> For an expression of the form a (b &gt; 0 ? + : -) b the JavaScript interpreter would not know the precedence of the operator between a and b, and therefore such expressions are not allowed.</p></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">8/22/2019, 12:34:49 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/sicp-javascript-zh/chapter1.html" class="prev">
          1 使用函数构造抽象
        </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/sicp-javascript-zh/assets/js/app.9215d83a.js" defer></script><script src="/sicp-javascript-zh/assets/js/2.6b5425dd.js" defer></script><script src="/sicp-javascript-zh/assets/js/4.f60551b5.js" defer></script>
  </body>
</html>
